(this.webpackJsonpcart=this.webpackJsonpcart||[]).push([[0],{36:function(e,t,c){},55:function(e,t,c){},80:function(e,t,c){"use strict";c.r(t);var n=c(33),a=c.n(n),r=c(2),i=c(47),s=c(0),j=c(18),d=c.n(j),l=(c(55),c(24)),u=(c(36),c(26)),h=c(14),o=c(16),b=c(25),O=c(15),x=c(12),m=c.n(x),f=c(22),p=c(27),v=function(e){var t=e.price,c=e.name,n=e.desc;return Object(r.jsx)(O.a,{children:Object(r.jsx)(p.a,{children:Object(r.jsxs)(p.a.Body,{children:[Object(r.jsxs)(p.a.Title,{children:[" ",c,": ",t,"$"," "]}),Object(r.jsxs)(p.a.Text,{children:[" ",n," "]})]})})})},g=function(e){var t=e.cartid,c=Object(s.useState)([]),n=Object(l.a)(c,2),a=n[0],i=n[1],j=Object(s.useState)(0),d=Object(l.a)(j,2),x=d[0],p=d[1];Object(s.useEffect)((function(){m()({method:"GET",withCredentials:!0,url:"/api/cart/".concat(t)}).then((function(e){m()({method:"GET",withCredentials:!0,url:"/api/products/".concat(t)}).then((function(t){var c={};t.data.forEach((function(t){c[t._id]={name:t.productName,price:t.productPrice,desc:t.productDescription,quant:e.data[t._id]}})),p(g(c)),i(c)})).catch((function(e){i([]),p(0)}))})).catch((function(e){i([]),p(0)}))}),[i,t]);var v=function(){var e=Object.values(a);return 0===e.length?0:e.map((function(e){return e.price*e.quant})).reduce((function(e,t){return e+t}))+x},g=function(e){var t=Object.values(e);return 0===t.length?0:t.map((function(e){return e.quant})).reduce((function(e,t){return e+t}))>4?10:0};return 0===Object.values(a).length?Object(r.jsxs)(O.a,{className:"center p-4",children:[Object(r.jsx)("h3",{children:"Your cart is empty.."}),Object(r.jsx)("h4",{children:Object(r.jsx)(f.b,{to:"/",children:"Fill it!"})})]}):Object(r.jsx)(O.a,{children:Object(r.jsxs)(b.a,{children:[Object(r.jsx)(o.a,{sm:8,xs:12,children:Object(r.jsxs)(b.a,{children:[Object(r.jsx)(o.a,{sm:8,xs:8,children:Object(r.jsxs)(h.a,{children:[Object(r.jsx)(h.a.Item,{active:!0,children:"q: item name"},"nameundefined"),a?Object.values(a).map((function(e){return Object(r.jsxs)(h.a.Item,{children:[e.quant,": ",e.name]},"name".concat(e.name))})):{}]})}),Object(r.jsx)(o.a,{sm:4,xs:4,children:Object(r.jsxs)(h.a,{children:[Object(r.jsx)(h.a.Item,{active:!0,children:"price"},"priceundefined"),a?Object.values(a).map((function(e){return Object(r.jsxs)(h.a.Item,{children:[e.price,"$"]},"price".concat(e.name))})):{}]})})]})}),Object(r.jsxs)(o.a,{sm:4,xs:12,className:"center p-3",children:[Object(r.jsxs)("h5",{children:[" ","Shipping: ",x,"$ "]}),Object(r.jsx)("h3",{children:"Total"}),Object(r.jsxs)("h4",{children:[" ",v(),"$ "]}),Object(r.jsx)(u.a,{variant:"danger",onClick:0==v()?null:function(){m()({method:"DELETE",url:"/api/cart/",withCredentials:!0,data:{cartid:t}}).then((function(e){i({})})).catch((function(e){}))},children:"Empty Cart"})]})]})})},C=c(23),w=c(19),E=function(e){var t=e.cartid,c=Object(s.useState)([]),n=Object(l.a)(c,2),a=n[0],i=n[1],j=Object(s.useState)({}),d=Object(l.a)(j,2),x=d[0],f=d[1];Object(s.useEffect)((function(){m()({method:"GET",withCredentials:!0,url:"/api/products"}).then((function(e){m()({method:"GET",withCredentials:!0,url:"/api/cart/".concat(t)}).then((function(t){i(e.data),f(t.data)})).catch((function(e){i([]),f({})}))})).catch((function(e){i([]),f({})}))}),[i,f,t]);return Object(r.jsx)(h.a,{children:Object.values(a).map((function(e){return Object(r.jsx)(h.a.Item,{children:Object(r.jsx)(O.a,{fluid:"xl",children:Object(r.jsxs)(b.a,{children:[Object(r.jsx)(o.a,{xs:1,lg:1,md:1,sm:1,className:"center",children:x[e._id]?x[e._id]:0}),Object(r.jsxs)(o.a,{xs:1,lg:1,md:1,sm:1,className:"center",children:[Object(r.jsx)(u.a,{variant:"primary",className:"m-2",onClick:function(){return function(e){var c;c=x[e]?Object(w.a)(Object(w.a)({},x),{},Object(C.a)({},e,x[e]+1)):Object(w.a)(Object(w.a)({},x),{},Object(C.a)({},e,1)),m()({method:"PUT",withCredentials:!0,url:"/api/cart",data:{cartid:t,newcart:c}}).then((function(e){f(c)})).catch((function(e){}))}(e._id)},children:"+"}),Object(r.jsx)(u.a,{variant:"primary",className:"m-2",onClick:function(){return function(e){if(x[e]&&0!==x[e]){var c=Object(w.a)(Object(w.a)({},x),{},Object(C.a)({},e,x[e]-1));0===c[e]&&delete c[e],m()({method:"PUT",withCredentials:!0,url:"/api/cart",data:{cartid:t,newcart:c}}).then((function(e){f(c)})).catch((function(e){}))}}(e._id)},children:"-"})]}),Object(r.jsx)(o.a,{xs:9,lg:10,md:9,sm:10,children:Object(r.jsx)(v,{name:e.productName,price:e.productPrice,desc:e.productDescription})})]})})},e._id)}))})},T=c(20),N=c(6),y=function(e){var t=e.user;return Object(r.jsxs)(f.a,{children:[Object(r.jsxs)(T.a,{expand:"lg",variant:"light",bg:"light",children:[Object(r.jsx)(T.a.Brand,{children:"Cart.io"}),Object(r.jsx)(T.a.Toggle,{}),Object(r.jsxs)(T.a.Collapse,{className:"justify-content-end",children:[Object(r.jsx)(T.a.Text,{className:"nav-item-collapse",children:Object(r.jsx)(f.b,{to:"/cart",children:"Cart"})}),Object(r.jsx)("br",{}),Object(r.jsx)(T.a.Text,{className:"nav-item-collapse",children:Object(r.jsx)(f.b,{to:"/",children:"Home"})})]})]}),Object(r.jsx)(O.a,{children:Object(r.jsxs)(N.c,{children:[Object(r.jsx)(N.a,{path:"/cart",children:Object(r.jsx)(g,{cartid:t.cart})}),Object(r.jsx)(N.a,{path:"/",children:Object(r.jsx)(E,{cartid:t.cart})})]})})]})};c(79);Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m()({method:"GET",withCredentials:!0,url:"/api/user"}).then((function(e){d.a.render(Object(r.jsx)(y,{user:e.data}),document.getElementById("root"))})).catch((function(e){d.a.render(Object(r.jsx)(y,{user:{cart:void 0}}),document.getElementById("root"))}));case 1:case"end":return e.stop()}}),e)})))()}},[[80,1,2]]]);
//# sourceMappingURL=main.69b88bd3.chunk.js.map
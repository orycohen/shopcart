{"version":3,"sources":["Product.js","Cart.js","Home.js","App.js","index.js"],"names":["Product","price","name","desc","Container","Card","Body","Title","Text","Cart","cartid","useState","cartItems","setCartItems","shipPrice","setShipPrice","useEffect","Axios","method","withCredentials","url","then","resCart","resProducts","items","data","forEach","prod","_id","productName","productPrice","productDescription","quant","getShippingPrice","catch","error","getTotalPrice","Object","values","length","map","i","reduce","i1","i2","className","to","Row","Col","sm","xs","ListGroup","Item","active","cartItem","Button","variant","onClick","res","Home","products","setProducts","fluid","lg","md","id","newCartItems","newcart","addProduct","subProduct","App","user","Navbar","expand","bg","Brand","Toggle","Collapse","path","cart","a","ReactDOM","render","document","getElementById","undefined"],"mappings":"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","file":"static/js/main.69b88bd3.chunk.js","sourcesContent":["import React, { useState } from 'react';\nimport Container from 'react-bootstrap/Container';\nimport Card from 'react-bootstrap/Card';\n\nconst Product = ({price, name, desc}) => {\n    return (\n        <Container>\n            <Card>\n                <Card.Body>\n                    <Card.Title> {name}{\": \"}{price}{\"$\"} </Card.Title>\n                    <Card.Text> {desc} </Card.Text>\n                </Card.Body>\n            </Card>\n        </Container>\n    );\n}\n\nexport default Product;\n","import './Cart.css';\nimport React, { useState, useEffect } from 'react';\nimport Button from 'react-bootstrap/Button';\nimport ListGroup from 'react-bootstrap/ListGroup';\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport Container from 'react-bootstrap/Container';\nimport Axios from 'axios';\nimport {Link} from \"react-router-dom\";\nimport Product from './Product.js'\n\nconst Cart = ({cartid}) => {\n    const [cartItems, setCartItems] = useState([]);\n    const [shipPrice, setShipPrice] = useState(0);\n    useEffect(() => {\n        Axios({\n            method: \"GET\",\n            withCredentials: true,\n            url: `/api/cart/${cartid}`\n        }).then(resCart => {\n            Axios({\n                method: \"GET\",\n                withCredentials: true,\n                url: `/api/products/${cartid}`\n            }).then(resProducts => {\n                let items = {};\n                resProducts.data.forEach(prod => {\n                    items[prod._id] = {\n                        name: prod.productName,\n                        price: prod.productPrice,\n                        desc: prod.productDescription,\n                        quant: resCart.data[prod._id]\n                    };\n                });\n                setShipPrice(getShippingPrice(items));\n                setCartItems(items);\n            }).catch(error => {\n                setCartItems([]);\n                setShipPrice(0);\n            });\n        }).catch(error => {\n            setCartItems([]);\n            setShipPrice(0);\n        });\n    },[setCartItems, cartid]);\n\n    const getTotalPrice = () => {\n        const items = Object.values(cartItems);\n        if (items.length === 0) return 0;\n        const totalPrice = items.map(i => i.price * i.quant).reduce((i1, i2) => i1 + i2);\n        return totalPrice + shipPrice;\n    }\n\n    const getShippingPrice = (cartItems) => {\n        const items = Object.values(cartItems);\n        if (items.length === 0) return 0;\n        const itemsCount = items.map(i => i.quant).reduce((i1, i2) => i1 + i2);\n        if (itemsCount > 4)\n            return 10\n        return 0\n    }\n\n    const emptyCart = () => {\n        Axios({\n            method: \"DELETE\",\n            url: \"/api/cart/\",\n            withCredentials: true,\n            data: {cartid}\n        }).then(res => {setCartItems({})})\n        .catch(error => {});\n    }\n\n    if (Object.values(cartItems).length === 0) {\n        return (\n            <Container className=\"center p-4\">\n                <h3>\n                    Your cart is empty..\n                </h3>\n                <h4>\n                    <Link to=\"/\">Fill it!</Link>\n                </h4>\n            </Container>\n        );\n    }\n\n    return (\n        <Container>\n            <Row>\n                <Col sm={8} xs={12}>\n                    <Row>\n                        <Col sm={8} xs={8}>\n                            <ListGroup>\n                            <ListGroup.Item key={\"nameundefined\"} active>q: item name</ListGroup.Item>\n                            {\n                                cartItems ?\n                                Object.values(cartItems).map(cartItem => \n                                    <ListGroup.Item key={`name${cartItem.name}`}>{cartItem.quant}: {cartItem.name}</ListGroup.Item>\n                                ) :\n                                {}\n                            }\n                            </ListGroup>\n                        </Col>\n                        <Col sm={4} xs={4}>\n                            <ListGroup>\n                            <ListGroup.Item key={\"priceundefined\"} active>price</ListGroup.Item>\n                            {\n                                cartItems ?\n                                Object.values(cartItems).map(cartItem => \n                                    <ListGroup.Item key={`price${cartItem.name}`}>{cartItem.price}$</ListGroup.Item>\n                                ) :\n                                {}\n                            }\n                            </ListGroup>\n                        </Col>\n                    </Row>\n                </Col>\n                <Col sm={4} xs={12} className=\"center p-3\">\n                    <h5> {\"Shipping: \"}{ shipPrice }$ </h5>\n                    <h3>Total</h3>\n                    <h4> { getTotalPrice() }$ </h4>\n                    <Button \n                        variant=\"danger\"\n                        onClick={getTotalPrice() == 0 ? null : emptyCart}\n                    >Empty Cart</Button>\n                </Col>\n            </Row>\n        </Container>\n    );\n}\n\nexport default Cart;\n","import './Cart.css';\nimport React, { useState, useEffect } from 'react';\nimport Button from 'react-bootstrap/Button';\nimport ListGroup from 'react-bootstrap/ListGroup';\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport Container from 'react-bootstrap/Container';\nimport Axios from 'axios';\nimport Product from './Product.js'\n\nconst Home = ({cartid}) => {\n    const [products, setProducts] = useState([]);\n    const [cartItems, setCartItems] = useState({});\n    useEffect(() => {\n        Axios({\n            method: \"GET\",\n            withCredentials: true,\n            url: \"/api/products\"\n        }).then(resProducts => {\n            Axios({\n                method: \"GET\",\n                withCredentials: true,\n                url: `/api/cart/${cartid}`\n            }).then(resCart => {\n                setProducts(resProducts.data);\n                setCartItems(resCart.data);\n            }).catch(error => {\n                setProducts([]);\n                setCartItems({});\n            });\n        }).catch(error => {\n            setProducts([]);\n            setCartItems({});\n        });\n    },[setProducts, setCartItems, cartid]);\n\n    const addProduct = (id) => {\n        let newCartItems;\n        if (cartItems[id])\n            newCartItems = {...cartItems, [id]: cartItems[id] + 1}\n        else\n            newCartItems = {...cartItems, [id]: 1}\n        Axios({\n            method: \"PUT\",\n            withCredentials: true,\n            url: \"/api/cart\",\n            data: {cartid, newcart: newCartItems}\n        }).then(res => {\n            setCartItems(newCartItems);\n        }).catch(error => {});\n    }\n\n    const subProduct = (id) => {\n        if (!cartItems[id] || cartItems[id] === 0) return;\n        let newCartItems = {...cartItems, [id]: cartItems[id] - 1}\n        if (newCartItems[id] === 0)\n            delete newCartItems[id];\n        Axios({\n            method: \"PUT\",\n            withCredentials: true,\n            url: \"/api/cart\",\n            data: {cartid, newcart: newCartItems}\n        }).then(res => {\n            setCartItems(newCartItems);\n        }).catch(error => {});\n    }\n\n    return (\n        <ListGroup>\n            {\n                Object.values(products).map(prod => \n                    <ListGroup.Item key={prod._id} >\n                        <Container fluid=\"xl\">\n                            <Row>\n                                <Col xs={1} lg={1} md={1} sm={1} className=\"center\">\n                                    {cartItems[prod._id] ? cartItems[prod._id] : 0}\n                                </Col>\n                                <Col xs={1} lg={1} md={1} sm={1} className=\"center\">\n                                    <Button variant=\"primary\" className=\"m-2\" onClick={() => addProduct(prod._id)} >+</Button>\n                                    <Button variant=\"primary\" className=\"m-2\" onClick={() => subProduct(prod._id)} >-</Button>\n                                </Col>\n                                <Col xs={9} lg={10} md={9} sm={10}>\n                                    <Product name={prod.productName} price={prod.productPrice} desc={prod.productDescription}/>\n                                </Col>\n                            </Row>\n                        </Container>\n                    </ListGroup.Item>\n                )\n            }\n        </ListGroup>\n    );\n}\n\nexport default Home;\n","import './App.css';\nimport Cart from './Cart.js';\nimport Home from './Home.js';\nimport Container from 'react-bootstrap/Container';\nimport Navbar from 'react-bootstrap/Navbar';\nimport {BrowserRouter as Router, Switch, Route, Link} from \"react-router-dom\";\n\nconst App = ({user}) => {\n    return (\n        <Router>\n            <Navbar expand=\"lg\" variant=\"light\" bg=\"light\">\n                <Navbar.Brand>Cart.io</Navbar.Brand>\n                <Navbar.Toggle/>\n                <Navbar.Collapse className=\"justify-content-end\">\n                    <Navbar.Text className=\"nav-item-collapse\">\n                        <Link to=\"/cart\">Cart</Link>\n                    </Navbar.Text><br/>\n                    <Navbar.Text className=\"nav-item-collapse\">\n                        <Link to=\"/\">Home</Link>\n                    </Navbar.Text>\n                </Navbar.Collapse>\n            </Navbar>\n            <Container>\n                <Switch>\n                    <Route path=\"/cart\">\n                        <Cart cartid={user.cart}/>\n                    </Route>\n                    <Route path=\"/\">\n                        <Home cartid={user.cart}/>\n                    </Route>\n                </Switch>\n            </Container>\n        </Router>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport Axios from 'axios';\nimport '../node_modules/bootstrap/dist/css/bootstrap.min.css';\n\n(async () => {\n    Axios({\n        method: \"GET\",\n        withCredentials: true,\n        url: \"/api/user\"\n    })\n        .then(res => {ReactDOM.render(<App user={res.data}/>, document.getElementById('root'))})\n        .catch(res => {ReactDOM.render(<App user={{cart: undefined}}/>, document.getElementById('root'))})\n})();\n"],"sourceRoot":""}